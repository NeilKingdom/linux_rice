" PATH VARIABLES

set runtimepath^=$XDG_CONFIG_HOME/vim
set packpath^=$XDG_CONFIG_HOME/vim/plugged
set viminfo=%,<800,'10,/50,:100,h,f0,n~/.config/vim/viminfo

" CONFIG START

syntax on
let mapleader=" "
" let g:solarized_termcolors=256                Use degraded 256 colorscheme
let g:gruvbox_termcolors=256

" PLUGGINS

source $XDG_CONFIG_HOME/vim/cscope.vim

call plug#begin('~/.config/vim/plugged')
Plug 'airblade/vim-gitgutter'
Plug 'vim-airline/vim-airline'
Plug 'altercation/vim-colors-solarized'
Plug 'morhetz/gruvbox'
call plug#end()

" SETS

set background=dark
set encoding=utf-8                           " Set the default encoding to UTF-8
set pastetoggle=<F12>                        " Required when pasting code with comments to avoid strange line indenting behavior
set clipboard=unnamedplus                    " Copy to the system clipboard when using the '+' register
set splitbelow splitright                    " Window split directions
set number relativenumber                    " Line that cursor is on will be the actual line number. Other numbers are relative positions to the current line
set autoindent
set smartindent
set expandtab
set tabstop=3
set softtabstop=3
set shiftwidth=3
set scrolloff=8                              " # of lines between cursor before screen scrolls
set ignorecase
set smartcase
set nohlsearch
set incsearch                                " GOTO words as the pattern is being matched
set nowrap                                   " Set line wrap off by default
set noswapfile
set nobackup
set undodir=~/.config/vim/undodir
set undofile
set wildmode=longest,list,full
set signcolumn=no                            " Turn signcolumn off by default for Git-Gutter
set updatetime=100                           " Realtime update delay for Git-Gutter
" Pressing ESC into norm mode followed by Shift+o stalls
" The fix is to set ttimeoutlen to something small
set timeout ttimeout
set timeoutlen=500
set ttimeoutlen=20

" MAPPINGS

nnoremap <leader>c :set signcolumn=yes<CR>
nnoremap <leader>C :set signcolumn=no<CR>
nnoremap <leader>sh :!clear<CR>:!shellcheck %<CR>
nnoremap <leader>so :so %<CR>
nnoremap <leader>sc :set smartcase!<CR>:set smartcase?<CR> " Toggle smartcase
nnoremap <leader>lw :set wrap!<CR>:set wrap?<CR>           " Toggle line wrap

" Copy and paste (in visual mode)

" unmap <C-y>
vnoremap <C-y> "+y                                         " Yank highlighted
nnoremap <C-y> "+yy                                        " Yank entire line
" unmap <C-x>
vnoremap <C-x> "+d                                         " Delete highlighted
nnoremap <C-x> "+dd                                        " Delete entire line
" unmap <C-p>
nnoremap <C-p> "+p
vnoremap <C-p> <ESC>"+p
inoremap <C-p> <ESC>"+pa

" Switching windows
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l

" Resizing windows
nnoremap <Up> 5<C-w><S-+>
nnoremap <Down> 5<C-w><S-->
nnoremap <Left> 10<C-w><S->>
nnoremap <Right> 10<C-w><S-<>

" Center page on movements
nnoremap n nzz
nnoremap N Nzz
nnoremap <C-d> <C-d>zz
nnoremap <C-u> <C-u>zz
nnoremap <S-[> <S-[>zz
nnoremap <S-]> <S-]>zz

" AUTO COMMANDS

" Detect latex files properly
autocmd BufRead,BufNewFile *.tex set filetype=tex

" Set spellcheck on for tex, latex, markdown
" autocmd FileType tex,latex,markdown setlocal spell! spelllang=en_us

" Center page on transition to insert mode
autocmd InsertEnter * norm zz

" Clear trailing whitespace on save
autocmd BufWritePre * %s/\s\+$//e

" OTHER

colorscheme gruvbox
